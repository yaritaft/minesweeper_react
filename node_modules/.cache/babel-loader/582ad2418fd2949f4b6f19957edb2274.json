{"ast":null,"code":"import _regeneratorRuntime from\"/home/yari/Desktop/minesweeper_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/home/yari/Desktop/minesweeper_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/yari/Desktop/minesweeper_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/yari/Desktop/minesweeper_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/yari/Desktop/minesweeper_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{apiPost}from\"../services/requestService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function Login(){var history=useHistory();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginInfo=_useState2[0],setLoginInfo=_useState2[1];function handleSubmit(){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _value$data;var value;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return apiPost(\"/api/user/login\",_objectSpread({},loginInfo));case 2:value=_context.sent;if(value===null||value===void 0?void 0:(_value$data=value.data)===null||_value$data===void 0?void 0:_value$data.authorization){localStorage.setItem('authorization',value.data.authorization);history.push(\"/menu\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}function handleChange(event){var value=event.target.value;setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{},_defineProperty({},event.target.name,value)));}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",value:loginInfo.email,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:loginInfo.password,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSubmit,children:\"Log In\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/registry\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",children:\"Sign Up\"})})]});}","map":{"version":3,"sources":["/home/yari/Desktop/minesweeper_react/src/pages/Login.tsx"],"names":["React","useState","useHistory","apiPost","Login","history","email","password","loginInfo","setLoginInfo","handleSubmit","value","data","authorization","localStorage","setItem","push","handleChange","event","target","name"],"mappings":"qwBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,4BAAxB,C,6IAcA,MAAO,SAASC,CAAAA,KAAT,EAA8B,CACjC,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CACF,cAAkCD,QAAQ,CAAQ,CAChDK,KAAK,CAAE,EADyC,CAEhDC,QAAQ,CAAE,EAFsC,CAAR,CAA1C,wCAAOC,SAAP,eAAkBC,YAAlB,eAFmC,QAMpBC,CAAAA,YANoB,8IAMnC,mLACwBP,CAAAA,OAAO,CAAgB,iBAAhB,kBAAuCK,SAAvC,EAD/B,QACUG,KADV,eAEI,GAAGA,KAAH,SAAGA,KAAH,8BAAGA,KAAK,CAAEC,IAAV,sCAAG,YAAaC,aAAhB,CAA8B,CAC1BC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCJ,KAAK,CAACC,IAAN,CAAWC,aAAjD,EACAR,OAAO,CAACW,IAAR,CAAa,OAAb,EACH,CALL,sDANmC,+CAenC,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAAwE,CACtE,GAAMP,CAAAA,KAAK,CAAGO,KAAK,CAACC,MAAN,CAAaR,KAA3B,CACAF,YAAY,gCACPD,SADO,wBAETU,KAAK,CAACC,MAAN,CAAaC,IAFJ,CAEWT,KAFX,GAAZ,CAID,CAED,mBACE,wCACE,qCACE,+CAEE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAEH,SAAS,CAACF,KAHnB,CAIE,QAAQ,CAAEW,YAJZ,EAFF,GADF,cAUE,aAVF,cAWE,kDAEE,cACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAET,SAAS,CAACD,QAHnB,CAIE,QAAQ,CAAEU,YAJZ,EAFF,GAXF,cAoBE,aApBF,cAqBE,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEP,YAA/B,oBArBF,GADF,cAyBE,UAAG,IAAI,CAAC,WAAR,uBACE,eAAQ,IAAI,CAAC,QAAb,qBADF,EAzBF,GADF,CA+BD","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { apiPost } from \"../services/requestService\";\n\ninterface State {\n  email: string;\n  password: string;\n}\n\ninterface TokenResponse {\n    data: {\n        authorization: string;\n    }\n    status: number;\n}\n\nexport function Login(): JSX.Element {\n    const history = useHistory();\n  const [loginInfo, setLoginInfo] = useState<State>({\n    email: \"\",\n    password: \"\",\n  });\n  async function handleSubmit(): Promise<any> {\n      const value = await apiPost<TokenResponse>(\"/api/user/login\", {...loginInfo});\n      if(value?.data?.authorization){\n          localStorage.setItem('authorization', value.data.authorization);\n          history.push(\"/menu\")\n      }\n\n}\n\n  function handleChange(event: React.ChangeEvent<HTMLInputElement>): void {\n    const value = event.target.value;\n    setLoginInfo({\n      ...loginInfo,\n      [event.target.name]: value,\n    });\n  }\n\n  return (\n    <>\n      <form>\n        <label>\n          Email:\n          <input\n            type=\"text\"\n            name=\"email\"\n            value={loginInfo.email}\n            onChange={handleChange}\n          />\n        </label>\n        <br />\n        <label>\n          Password:\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={loginInfo.password}\n            onChange={handleChange}\n          />\n        </label>\n        <br />\n        <button type=\"button\" onClick={handleSubmit}>Log In</button>\n\n      </form>\n      <a href=\"/registry\">\n        <button type=\"button\">Sign Up</button>\n      </a>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}