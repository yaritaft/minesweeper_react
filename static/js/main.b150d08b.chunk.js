(this.webpackJsonpminesweeper_react=this.webpackJsonpminesweeper_react||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(31),s=n.n(r),o=(n(37),n(13)),i=n(3),u=(n(38),n(0));function j(){var e=Object(i.f)();return Object(u.jsx)("button",{type:"button",onClick:function(){localStorage.removeItem("authorization"),e.push("/")},children:"Logout"})}var l=n(12),b=n(11),p=n(2),d=n.n(p),O=n(5),h=n(10);function x(e){var t,n,a=Object(i.f)();return Object(u.jsx)("button",{type:"button",onClick:null!==(t=e.handleClick)&&void 0!==t?t:function(){a.push(e.path)},children:null!==(n=e.message)&&void 0!==n?n:"Go Back"})}var m=n(16),f=n.n(m),v=function(){return{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*",authorization:localStorage.getItem("authorization")}},g=function(){var e=Object(O.a)(d.a.mark((function e(t,n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://still-brushlands-88515.herokuapp.com"+t,{headers:v(),params:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(O.a)(d.a.mark((function e(t,n,a,c){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.post("https://still-brushlands-88515.herokuapp.com"+t,n,{headers:v()}).then((function(e){return console.log(JSON.stringify(e)),{data:e.data,status:e.status}})).catch((function(e){return console.log(e),e})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(d.a.mark((function e(t,n,a,c){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.patch("https://still-brushlands-88515.herokuapp.com"+t,n,{headers:v()}).then((function(e){return console.log(JSON.stringify(e)),{data:e.data,status:e.status}})).catch((function(e){return console.log(e),e})),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}();function k(){var e=Object(a.useState)({rows:0,columns:0,amountOfMines:0}),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(i.f)(),s=function(){var e=Object(O.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/api/games",n);case 2:(null===(a=e.sent)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.gameId)&&r.push("/minesweeper/".concat(a.data.gameId));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function o(e){var t=e.target.value;c(Object(b.a)(Object(b.a)({},n),{},Object(l.a)({},e.target.name,Number(t))))}return Object(u.jsxs)("div",{children:[Object(u.jsxs)("label",{children:["Rows",Object(u.jsx)("input",{type:"number",name:"rows",value:n.rows,onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Columns",Object(u.jsx)("input",{type:"number",name:"columns",value:n.columns,onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Amount of mines",Object(u.jsx)("input",{type:"number",name:"amountOfMines",value:n.amountOfMines,onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",onClick:s,children:"New Game"}),Object(u.jsx)("br",{}),Object(u.jsx)(x,{path:"/saved-games",message:"Load Game"})]})}function C(){var e=Object(i.f)(),t=Object(a.useState)({email:"",password:""}),n=Object(h.a)(t,2),c=n[0],r=n[1];function s(){return(s=Object(O.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w("/api/user/login",Object(b.a)({},c));case 2:(null===(a=t.sent)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.authorization)?(localStorage.setItem("authorization",a.data.authorization),e.push("/menu")):alert("Wrong credentials.");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(e){var t=e.target.value;r(Object(b.a)(Object(b.a)({},c),{},Object(l.a)({},e.target.name,t)))}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{children:[Object(u.jsxs)("label",{children:["Email:",Object(u.jsx)("input",{type:"text",name:"email",value:c.email,onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Password:",Object(u.jsx)("input",{type:"password",name:"password",value:c.password,onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",onClick:function(){return s.apply(this,arguments)},children:"Log In"})]}),Object(u.jsx)("br",{}),Object(u.jsx)(x,{path:"/registry",message:"Sign Up"})]})}var S,N;n(21);!function(e){e.Flagged="Flagged",e.Checked="Checked",e.Question="Question",e.Unchecked="Unchecked"}(S||(S={})),function(e){e.InProgress="InProgress",e.Stopped="Stopped",e.Won="Won",e.Lost="Lost"}(N||(N={}));function F(e){var t={x:e.x,y:e.y,type:e.clickAction},n=function(){var n=Object(O.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y("/api/games/".concat(e.id,"/click"),t);case 2:(a=n.sent).data&&e.setGame(a.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(u.jsxs)("button",{type:"button",onClick:n,children:[e.cellState===S.Checked?"\u2713":e.cellState===S.Flagged?"\u2691":e.cellState===S.Question?"?":" ",Object(u.jsx)("br",{})]})}function I(e){var t=e.game,n=e.setGame;return Object(u.jsxs)("div",{children:[Object(u.jsx)("br",{}),t&&t.state&&t.matrix&&function(t){var a;return Object(u.jsx)(u.Fragment,{children:null===t||void 0===t||null===(a=t.matrix)||void 0===a?void 0:a.map((function(a,c){return Object(u.jsxs)(u.Fragment,{children:[a.map((function(a,r){var s,o,i,j,l,b;return Object(u.jsx)(u.Fragment,{children:(null===t||void 0===t||null===(s=t.matrix)||void 0===s||null===(o=s[c])||void 0===o||null===(i=o[r])||void 0===i?void 0:i.state)&&Object(u.jsx)(F,{x:c,y:r,cellState:null===t||void 0===t||null===(j=t.matrix)||void 0===j||null===(l=j[c])||void 0===l||null===(b=l[r])||void 0===b?void 0:b.state,setGame:n,id:e.id,clickAction:e.clickAction})})})),Object(u.jsx)("br",{})]})}))})}(t),Object(u.jsx)("br",{}),"Game State: ".concat(null===t||void 0===t?void 0:t.state)]})}var L=c.a.memo(I),A=[S.Checked,S.Flagged,S.Question];function G(){var e=Object(i.g)().id,t=Object(i.f)(),n=Object(a.useState)(S.Checked),c=Object(h.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(),j=Object(h.a)(o,2),l=j[0],b=j[1],p=function(){var n=Object(O.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y("/api/games/".concat(e,"/state"));case 2:t.push("/menu");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var n=Object(O.a)(d.a.mark((function n(){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g("/api/games/".concat(e));case 2:200===(a=n.sent).status&&a.data&&(c=a.data,[N.Lost,N.Won].includes(c.state)&&(alert("You have ".concat(null===c||void 0===c?void 0:c.state)),console.log("You have ".concat(c.state)),console.log(JSON.stringify(c)),t.push("/menu")),b(c));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[t,e]),Object(a.useEffect)((function(){console.log(JSON.stringify(l)),(null===l||void 0===l?void 0:l.state)&&[N.Lost,N.Won].includes(l.state)&&(alert("You have ".concat(null===l||void 0===l?void 0:l.state)),console.log("You have ".concat(l.state)),console.log(JSON.stringify(l)),t.push("/menu"))}),[l,t]),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){var e=A.indexOf(r);s(A[2!==e?e+1:0])},children:r===S.Checked?"Click":r===S.Flagged?"Flag":r}),Object(u.jsx)("br",{}),l&&Object(u.jsx)(L,{id:e,game:l,setGame:b,clickAction:r}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",onClick:p,children:"Save Game"}),Object(u.jsx)("br",{}),Object(u.jsx)(x,{path:"/menu"})]})}function J(){var e=Object(i.f)(),t=Object(a.useState)({email:"",password:"",lastName:"",firstName:""}),n=Object(h.a)(t,2),c=n[0],r=n[1];function s(){return(s=Object(O.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w("/api/user/register",Object(b.a)({},c));case 2:200===(null===(n=t.sent)||void 0===n?void 0:n.status)&&e.push("/");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(e){var t=e.target.value;r(Object(b.a)(Object(b.a)({},c),{},Object(l.a)({},e.target.name,t)))}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{children:[Object(u.jsxs)("label",{children:["Name:",Object(u.jsx)("input",{type:"text",value:c.firstName,name:"firstName",onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["LastName:",Object(u.jsx)("input",{type:"text",value:c.lastName,name:"lastName",onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Email:",Object(u.jsx)("input",{type:"text",value:c.email,name:"email",onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Password:",Object(u.jsx)("input",{type:"password",value:c.password,name:"password",onChange:o})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",onClick:function(){return s.apply(this,arguments)},children:"Register"})]}),Object(u.jsx)("br",{}),Object(u.jsx)(x,{path:"/"})]})}function z(){var e=Object(a.useState)(),t=Object(h.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){(function(){var e=Object(O.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/api/games/ongoing");case 2:200===(t=e.sent).status&&c(t.data.games);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(u.jsxs)("div",{children:[null===n||void 0===n?void 0:n.map((function(e,t){return Object(u.jsxs)("div",{onClick:(n=null===e||void 0===e?void 0:e.gameId,function(){var e=Object(O.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("/api/games/".concat(n,"/state"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),children:[Object(u.jsx)(x,{path:"/minesweeper/".concat(e.gameId),message:"SLOT ".concat(t," - Game ID: ").concat(e.gameId)}),Object(u.jsx)("br",{})]});var n})),Object(u.jsx)("br",{}),Object(u.jsx)(x,{path:"/menu"})]})}var E=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)("header",{className:"App-header",children:Object(u.jsxs)(o.a,{basename:"/minesweeper_react",children:[Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{exact:!0,path:"/",children:Object(u.jsx)(C,{})}),Object(u.jsx)(i.a,{exact:!0,path:"/registry",children:Object(u.jsx)(J,{})}),Object(u.jsx)(i.a,{exact:!0,path:"/menu",children:Object(u.jsx)(k,{})}),Object(u.jsx)(i.a,{exact:!0,path:"/saved-games",children:Object(u.jsx)(z,{})}),Object(u.jsx)(i.a,{exact:!0,path:"/minesweeper/:id",children:Object(u.jsx)(G,{})})]}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)(j,{})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(E,{})}),document.getElementById("root")),P()}},[[64,1,2]]]);
//# sourceMappingURL=main.b150d08b.chunk.js.map